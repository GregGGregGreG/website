function initMap(){var e={center:new google.maps.LatLng(34.299,66.5175319),zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,styles:mapStyle};map=new google.maps.Map(document.getElementById("map"),e);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){locations=JSON.parse(this.responseText);for(var e=0;e<locations.length;e++){var a=locations[e].location.split(",");myLatLng=new google.maps.LatLng(a[0],a[1]);var o=new google.maps.Marker({map:map,position:myLatLng,optimized:!1,url:locations[e].html_url,title:locations[e].nickname,icon:{url:locations[e].avatar,scaledSize:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,0)}});o.setMap(map),markers.push(o),google.maps.event.addListener(o,"click",function(){window.open(this.url,"_blank")})}addMarkerCluster()}},a.open("GET","/registered/locations",!0),a.send(),inputSearch()}function inputSearch(){var e=document.getElementById("find-location"),a=new google.maps.places.SearchBox(e);map.addListener("bounds_changed",function(){a.setBounds(map.getBounds())}),a.addListener("places_changed",function(){var e=a.getPlaces();if(0!=e.length){var o=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),map.fitBounds(o)}})}function addMarkerCluster(){new MarkerClusterer(map,markers,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",maxZoom:18})}function hideAlert(){var e=document.getElementById("alert-success");void 0!==e&&null!=e&&e.remove()}var markers=[],locations=[];setTimeout(hideAlert,1e4);